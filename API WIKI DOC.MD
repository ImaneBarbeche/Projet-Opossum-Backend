# ğŸ“š OPOSSUM API - Documentation Wiki

## ğŸ  Page d'accueil API

Bienvenue dans la documentation de l'API OPOSSUM - Application de signalement d'objets perdus/trouvÃ©s

---

## ğŸ‘¤ Authentification

### ğŸ” Inscription
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ‘¤ Register New User**

ğŸ”— **Endpoint**
- Method: POST ğŸŸ¡
- URL: http://localhost:8080/api/v1/auth/register

ğŸ“– **Description**
Permet Ã  un nouvel utilisateur de crÃ©er un compte sur la plateforme OPOSSUM. Un email de vÃ©rification sera envoyÃ© aprÃ¨s l'inscription.

ğŸ” **Authentication**
Aucune authentification requise âŒ

ğŸ“¥ **Input**
**Body Parameters:**
```json
{
    "email": "string (required)",
    "password": "string (required, min 8 chars)",
    "firstName": "string (required)",
    "lastName": "string (required)",
    "phone": "string (optional)"
}
```

**Example:**
```json
POST /api/v1/auth/register
Content-Type: application/json

{
    "email": "marie.dupont@example.com",
    "password": "motdepasse123",
    "firstName": "Marie",
    "lastName": "Dupont",
    "phone": "+33123456789"
}
```

âœ… **Validation Rules**
- ğŸ“§ Email valide et unique requis
- ğŸ”’ Mot de passe minimum 8 caractÃ¨res
- ğŸ‘¤ PrÃ©nom et nom requis (2-50 caractÃ¨res)
- ğŸ“± TÃ©lÃ©phone optionnel (format franÃ§ais)

ğŸ“¤ **Response**

âœ… **Success (201)**
```json
{
    "success": true,
    "data": {
        "id": "550e8400-e29b-41d4-a716-446655440001",
        "email": "marie.dupont@example.com",
        "firstName": "Marie",
        "lastName": "Dupont",
        "isEmailVerified": false
    },
    "message": "Compte crÃ©Ã© avec succÃ¨s. VÃ©rifiez votre email.",
    "timestamp": "2025-07-09T10:30:00Z"
}
```

âŒ **Validation Error (400)**
```json
{
    "success": false,
    "error": {
        "code": "VALIDATION_ERROR",
        "message": "DonnÃ©es invalides",
        "details": {
            "email": "Email dÃ©jÃ  utilisÃ©",
            "password": "Mot de passe trop court"
        }
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

ğŸ”´ **Server Error (500)**
```json
{
    "success": false,
    "error": {
        "code": "INTERNAL_ERROR",
        "message": "Erreur lors de la crÃ©ation du compte: [error details]"
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ“§ Un email de vÃ©rification est envoyÃ© automatiquement
- ğŸ”’ Le mot de passe est hashÃ© avec bcrypt
- ğŸ‘¤ Role USER assignÃ© par dÃ©faut
- â° Token de vÃ©rification expire en 24h

---

### ğŸ” Connexion
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ”‘ User Login**

ğŸ”— **Endpoint**
- Method: POST ğŸŸ¡
- URL: http://localhost:8080/api/v1/auth/login

ğŸ“– **Description**
Authentifie un utilisateur et retourne les tokens JWT (access + refresh) pour accÃ©der aux endpoints protÃ©gÃ©s.

ğŸ” **Authentication**
Aucune authentification requise âŒ

ğŸ“¥ **Input**
**Body Parameters:**
```json
{
    "email": "string (required)",
    "password": "string (required)"
}
```

**Example:**
```json
POST /api/v1/auth/login
Content-Type: application/json

{
    "email": "marie.dupont@example.com",
    "password": "motdepasse123"
}
```

âœ… **Validation Rules**
- ğŸ“§ Email valide requis
- ğŸ”’ Mot de passe requis
- âœ… Compte doit Ãªtre vÃ©rifiÃ©
- âŒ Compte ne doit pas Ãªtre bloquÃ©

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "user": {
            "id": "550e8400-e29b-41d4-a716-446655440001",
            "email": "marie.dupont@example.com",
            "firstName": "Marie",
            "lastName": "Dupont",
            "role": "USER"
        },
        "tokens": {
            "accessToken": "eyJhbGciOiJIUzI1NiIs...",
            "refreshToken": "eyJhbGciOiJIUzI1NiIs...",
            "expiresIn": 1800
        }
    },
    "message": "Connexion rÃ©ussie",
    "timestamp": "2025-07-09T10:30:00Z"
}
```

âŒ **Authentication Error (401)**
```json
{
    "success": false,
    "error": {
        "code": "INVALID_CREDENTIALS",
        "message": "Email ou mot de passe incorrect"
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

âŒ **Account Blocked (403)**
```json
{
    "success": false,
    "error": {
        "code": "ACCOUNT_BLOCKED",
        "message": "Votre compte a Ã©tÃ© suspendu"
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ”‘ Access token expire en 30 minutes
- ğŸ”„ Refresh token expire en 7 jours
- ğŸ“± Stockez les tokens de maniÃ¨re sÃ©curisÃ©e cÃ´tÃ© client
- â° lastLoginAt mis Ã  jour automatiquement

---

### ğŸ”„ Refresh Token
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ”„ Refresh Access Token**

ğŸ”— **Endpoint**
- Method: POST ğŸŸ¡
- URL: http://localhost:8080/api/v1/auth/refresh

ğŸ“– **Description**
GÃ©nÃ¨re un nouveau token d'accÃ¨s Ã  partir d'un refresh token valide.

ğŸ” **Authentication**
Refresh Token required ğŸ”‘

ğŸ“¥ **Input**
**Body Parameters:**
```json
{
    "refreshToken": "string (required)"
}
```

**Example:**
```json
POST /api/v1/auth/refresh
Content-Type: application/json

{
    "refreshToken": "eyJhbGciOiJIUzI1NiIs..."
}
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "accessToken": "eyJhbGciOiJIUzI1NiIs...",
        "refreshToken": "eyJhbGciOiJIUzI1NiIs...",
        "expiresIn": 1800
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

âŒ **Invalid Token (401)**
```json
{
    "success": false,
    "error": {
        "code": "INVALID_REFRESH_TOKEN",
        "message": "Refresh token invalide ou expirÃ©"
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

---

### ğŸšª DÃ©connexion
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸšª User Logout**

ğŸ”— **Endpoint**
- Method: POST ğŸŸ¡
- URL: http://localhost:8080/api/v1/auth/logout

ğŸ“– **Description**
DÃ©connecte l'utilisateur et rÃ©voque ses tokens d'accÃ¨s et de refresh.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Body Parameters:**
```json
{
    "refreshToken": "string (optional)"
}
```

**Example:**
```json
POST /api/v1/auth/logout
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Content-Type: application/json

{
    "refreshToken": "eyJhbGciOiJIUzI1NiIs..."
}
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "message": "DÃ©connexion rÃ©ussie",
    "timestamp": "2025-07-09T10:30:00Z"
}
```

---

### ğŸ”‘ Mot de Passe OubliÃ©
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ”‘ Forgot Password**

ğŸ”— **Endpoint**
- Method: POST ğŸŸ¡
- URL: http://localhost:8080/api/v1/auth/forgot-password

ğŸ“– **Description**
Envoie un email avec un lien de rÃ©initialisation de mot de passe.

ğŸ” **Authentication**
Aucune authentification requise âŒ

ğŸ“¥ **Input**
**Body Parameters:**
```json
{
    "email": "string (required)"
}
```

**Example:**
```json
POST /api/v1/auth/forgot-password
Content-Type: application/json

{
    "email": "marie.dupont@example.com"
}
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "message": "Email de rÃ©initialisation envoyÃ©",
    "timestamp": "2025-07-09T10:30:00Z"
}
```

---

### ğŸ” RÃ©initialiser Mot de Passe
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ” Reset Password**

ğŸ”— **Endpoint**
- Method: POST ğŸŸ¡
- URL: http://localhost:8080/api/v1/auth/reset-password

ğŸ“– **Description**
RÃ©initialise le mot de passe avec un token reÃ§u par email.

ğŸ” **Authentication**
Aucune authentification requise âŒ

ğŸ“¥ **Input**
**Body Parameters:**
```json
{
    "token": "string (required)",
    "newPassword": "string (required, min 8 chars)"
}
```

**Example:**
```json
POST /api/v1/auth/reset-password
Content-Type: application/json

{
    "token": "reset-token-abc123",
    "newPassword": "nouveaumotdepasse123"
}
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "message": "Mot de passe rÃ©initialisÃ© avec succÃ¨s",
    "timestamp": "2025-07-09T10:30:00Z"
}
```

âŒ **Invalid Token (400)**
```json
{
    "success": false,
    "error": {
        "code": "INVALID_TOKEN",
        "message": "Token invalide ou expirÃ©"
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ”‘ Token valide pendant 1 heure seulement
- ğŸ”’ Invalidation automatique aprÃ¨s utilisation
- ğŸ”„ Nouvelle connexion requise aprÃ¨s reset

---

### âœ… VÃ©rification d'Email
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**âœ… Verify Email**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/auth/verify-email

ğŸ“– **Description**
VÃ©rifie l'email d'un utilisateur avec le token reÃ§u par email aprÃ¨s inscription.

ğŸ” **Authentication**
Aucune authentification requise âŒ

ğŸ“¥ **Input**
**Query Parameters:**
- `token` (string, required): Token de vÃ©rification reÃ§u par email

**Example:**
```
GET /api/v1/auth/verify-email?token=verify-token-abc123
```

âœ… **Validation Rules**
- ğŸ”‘ Token valide et non expirÃ© requis
- ğŸ“§ Email pas dÃ©jÃ  vÃ©rifiÃ©

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "message": "Email vÃ©rifiÃ© avec succÃ¨s. Vous pouvez maintenant vous connecter.",
    "timestamp": "2025-07-09T10:30:00Z"
}
```

âŒ **Invalid Token (400)**
```json
{
    "success": false,
    "error": {
        "code": "INVALID_VERIFICATION_TOKEN",
        "message": "Token de vÃ©rification invalide ou expirÃ©"
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

âŒ **Already Verified (409)**
```json
{
    "success": false,
    "error": {
        "code": "EMAIL_ALREADY_VERIFIED",
        "message": "Cet email est dÃ©jÃ  vÃ©rifiÃ©"
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ”‘ Token expire en 24h aprÃ¨s inscription
- âœ… Marque automatiquement le compte comme vÃ©rifiÃ©
- ğŸ“§ Redirection possible vers l'app mobile aprÃ¨s vÃ©rification

---

## ğŸ‘¤ Gestion des Utilisateurs

### ğŸ‘¤ Profil Utilisateur Actuel
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ‘¤ Get Current User Profile**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/users/profile

ğŸ“– **Description**
RÃ©cupÃ¨re les informations complÃ¨tes du profil de l'utilisateur actuellement connectÃ©. Cet endpoint permet aux utilisateurs de consulter leurs propres dÃ©tails de compte.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Query Parameters:**
Aucun paramÃ¨tre requis âŒ

**Example:**
```http
GET /api/v1/users/profile
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
```

âœ… **Validation Rules**
- ğŸ”’ Authentification JWT requise
- ğŸ‘¤ Compte utilisateur valide requis
- âœ… Compte doit Ãªtre vÃ©rifiÃ© et non bloquÃ©

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "id": "550e8400-e29b-41d4-a716-446655440001",
        "email": "marie.dupont@example.com",
        "firstName": "Marie",
        "lastName": "Dupont",
        "phone": "+33123456789",
        "avatar": "/files/avatar-123.jpg",
        "role": "USER",
        "isActive": true,
        "isEmailVerified": true,
        "createdAt": "2025-01-15T10:00:00Z",
        "lastLoginAt": "2025-07-09T08:30:00Z"
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

âŒ **Authentication Error (401)**
```json
{
    "success": false,
    "error": {
        "code": "UNAUTHORIZED",
        "message": "Token JWT invalide ou expirÃ©"
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

ğŸ”´ **Server Error (500)**
```json
{
    "success": false,
    "error": {
        "code": "INTERNAL_ERROR",
        "message": "Erreur lors de la rÃ©cupÃ©ration du profil utilisateur: [error details]"
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ‘¤ Retourne uniquement les informations du profil de l'utilisateur actuel
- ğŸ”’ Inclut les donnÃ©es privÃ©es (email, tÃ©lÃ©phone, statuts)
- âŒ Le mot de passe hashÃ© n'est jamais retournÃ©
- ğŸ¯ Parfait pour les pages de profil et tableaux de bord utilisateur

---

### ğŸ‘¥ Profil Public d'un Utilisateur
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ‘¥ Get Public User Profile**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/users/{id}

ğŸ“– **Description**
RÃ©cupÃ¨re les informations publiques d'un utilisateur spÃ©cifique. UtilisÃ© pour afficher le profil du propriÃ©taire d'une annonce.

ğŸ” **Authentication**
JWT Token optionnel ğŸ”“

ğŸ“¥ **Input**
**Path Parameters:**
- `id` (UUID, required): Identifiant unique de l'utilisateur

**Example:**
```http
GET /api/v1/users/550e8400-e29b-41d4-a716-446655440001
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...  # Optionnel
```

âœ… **Validation Rules**
- ğŸ†” ID utilisateur valide (format UUID)
- ğŸ‘¤ Utilisateur doit exister et Ãªtre actif
- ğŸš« Utilisateur ne doit pas Ãªtre bloquÃ©

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "id": "550e8400-e29b-41d4-a716-446655440001",
        "firstName": "Marie",
        "lastName": "Dupont",
        "avatar": "/files/avatar-456.jpg",
        "createdAt": "2024-12-15T14:20:00Z"
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

âŒ **Not Found (404)**
```json
{
    "success": false,
    "error": {
        "code": "USER_NOT_FOUND",
        "message": "Utilisateur introuvable"
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ”“ Accessible sans authentification pour certains cas
- ğŸ™ˆ DonnÃ©es privÃ©es (email, tÃ©lÃ©phone) non exposÃ©es
- ğŸ‘€ IdÃ©al pour voir qui a postÃ© une annonce
- ğŸ›¡ï¸ Respecte la vie privÃ©e des utilisateurs

---

### âœï¸ Modifier le Profil Utilisateur
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**âœï¸ Update User Profile**

ğŸ”— **Endpoint**
- Method: PUT ğŸŸ¡
- URL: http://localhost:8080/api/v1/users/profile

ğŸ“– **Description**
Met Ã  jour les informations du profil de l'utilisateur connectÃ© (nom, tÃ©lÃ©phone, avatar).

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Body Parameters:**
```json
{
    "firstName": "string (optional)",
    "lastName": "string (optional)",
    "phone": "string (optional)",
    "avatar": "string (optional, file path)"
}
```

**Example:**
```json
PUT /api/v1/users/profile
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Content-Type: application/json

{
    "firstName": "Marie-Claire",
    "lastName": "Dupont-Martin",
    "phone": "+33123456790"
}
```

âœ… **Validation Rules**
- ğŸ‘¤ PrÃ©nom optionnel (2-50 caractÃ¨res)
- ğŸ‘¤ Nom optionnel (2-50 caractÃ¨res)
- ğŸ“± TÃ©lÃ©phone optionnel (format franÃ§ais)
- ğŸ–¼ï¸ Avatar optionnel (URL de fichier uploadÃ©)

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "id": "550e8400-e29b-41d4-a716-446655440001",
        "email": "marie.dupont@example.com",
        "firstName": "Marie-Claire",
        "lastName": "Dupont-Martin",
        "phone": "+33123456790",
        "avatar": "/files/avatar-456.jpg",
        "createdAt": "2024-12-15T14:20:00Z",
        "updatedAt": "2025-07-09T21:00:00Z"
    },
    "message": "Profil mis Ã  jour avec succÃ¨s",
    "timestamp": "2025-07-09T21:00:00Z"
}
```

âŒ **Validation Error (400)**
```json
{
    "success": false,
    "error": {
        "code": "VALIDATION_ERROR",
        "message": "DonnÃ©es invalides",
        "details": {
            "phone": "Format de tÃ©lÃ©phone invalide"
        }
    },
    "timestamp": "2025-07-09T21:00:00Z"
}
```

ğŸ“ **Notes**
- âœï¸ Modification partielle autorisÃ©e (champs optionnels)
- ğŸ“§ Email non modifiable via cet endpoint
- ğŸ”„ Champ `updatedAt` automatiquement mis Ã  jour
- ğŸ–¼ï¸ Avatar uploadÃ© sÃ©parÃ©ment via endpoint files

---

### ğŸ” Changer le Mot de Passe
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ” Change Password**

ğŸ”— **Endpoint**
- Method: PUT ğŸŸ¡
- URL: http://localhost:8080/api/v1/users/password

ğŸ“– **Description**
Permet Ã  l'utilisateur de changer son mot de passe en fournissant l'ancien.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Body Parameters:**
```json
{
    "currentPassword": "string (required)",
    "newPassword": "string (required)"
}
```

**Example:**
```json
PUT /api/v1/users/password
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Content-Type: application/json

{
    "currentPassword": "ancienMotDePasse123",
    "newPassword": "nouveauMotDePasse456!"
}
```

âœ… **Validation Rules**
- ğŸ”’ Mot de passe actuel requis et valide
- ğŸ”’ Nouveau mot de passe requis (min 8 caractÃ¨res)
- ğŸš« Nouveau mot de passe diffÃ©rent de l'actuel

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "message": "Mot de passe modifiÃ© avec succÃ¨s",
    "timestamp": "2025-07-09T21:15:00Z"
}
```

âŒ **Unauthorized (401)**
```json
{
    "success": false,
    "error": {
        "code": "INVALID_CURRENT_PASSWORD",
        "message": "Mot de passe actuel incorrect"
    },
    "timestamp": "2025-07-09T21:15:00Z"
}
```

ğŸ“ **Notes**
- ğŸ” VÃ©rification obligatoire du mot de passe actuel
- ğŸ”„ Invalidation automatique des tokens existants
- ğŸ“§ Email de notification automatique
- ğŸ›¡ï¸ Nouvelle connexion requise aprÃ¨s changement

---

### ğŸ—‘ï¸ Supprimer son Compte
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ—‘ï¸ Delete User Account**

ğŸ”— **Endpoint**
- Method: DELETE ğŸ”´
- URL: http://localhost:8080/api/v1/users/account

ğŸ“– **Description**
Permet Ã  l'utilisateur de supprimer dÃ©finitivement son propre compte et toutes ses donnÃ©es.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Body Parameters:**
```json
{
    "password": "string (required)",
    "confirmDeletion": "boolean (required, must be true)"
}
```

**Example:**
```json
DELETE /api/v1/users/account
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Content-Type: application/json

{
    "password": "motdepasse123",
    "confirmDeletion": true
}
```

âœ… **Validation Rules**
- ğŸ”’ Mot de passe actuel requis et valide
- âœ… Confirmation explicite requise (confirmDeletion = true)
- ğŸ‘¤ Utilisateur doit Ãªtre actif

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "message": "Compte supprimÃ© dÃ©finitivement",
    "timestamp": "2025-07-09T21:30:00Z"
}
```

âŒ **Unauthorized (401)**
```json
{
    "success": false,
    "error": {
        "code": "INVALID_PASSWORD",
        "message": "Mot de passe incorrect"
    },
    "timestamp": "2025-07-09T21:30:00Z"
}
```

âŒ **Validation Error (400)**
```json
{
    "success": false,
    "error": {
        "code": "CONFIRMATION_REQUIRED",
        "message": "Confirmation de suppression requise"
    },
    "timestamp": "2025-07-09T21:30:00Z"
}
```

ğŸ“ **Notes**
- âš ï¸ Suppression dÃ©finitive et irrÃ©versible
- ğŸ—‚ï¸ Toutes donnÃ©es supprimÃ©es (annonces, messages, fichiers)
- ğŸ”„ Tokens invalidÃ©s immÃ©diatement
- ğŸ“§ Email de confirmation envoyÃ©

---

### ğŸ“„ Mes Annonces
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ“„ Get My Announcements**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/users/my-annonces

ğŸ“– **Description**
RÃ©cupÃ¨re toutes les annonces de l'utilisateur connectÃ© avec possibilitÃ© de filtrage.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Query Parameters:**
- `type` (string, optional): LOST ou FOUND
- `status` (string, optional): ACTIVE, RESOLVED, EXPIRED
- `page` (number, optional): NumÃ©ro de page (dÃ©faut: 0)
- `size` (number, optional): Taille de page (dÃ©faut: 20)
- `sort` (string, optional): createdAt,desc|createdAt,asc

**Example:**
```
GET /api/v1/users/my-annonces?type=FOUND&status=ACTIVE&page=0&size=10
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
```

âœ… **Validation Rules**
- ğŸ”’ Authentification JWT requise
- ğŸ‘¤ Utilisateur actif requis

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "content": [
            {
                "id": "550e8400-e29b-41d4-a716-446655440002",
                "title": "iPhone 13 Pro trouvÃ©",
                "description": "iPhone trouvÃ© prÃ¨s de la gare",
                "type": "FOUND",
                "category": "electronics",
                "status": "ACTIVE",
                "location": {
                    "latitude": 48.8566,
                    "longitude": 2.3522,
                    "address": "Gare du Nord, Paris"
                },
                "createdAt": "2025-07-09T08:30:00Z",
                "updatedAt": "2025-07-09T08:30:00Z",
                "thumbnailUrl": "/files/thumb_img_001.jpg",
                "messageCount": 3,
                "viewCount": 25
            }
        ],
        "page": {
            "number": 0,
            "size": 10,
            "totalElements": 1,
            "totalPages": 1
        }
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ‘¤ Affiche uniquement les annonces de l'utilisateur connectÃ©
- ğŸ“Š Inclut statistiques (messages, vues) pour gestion
- ğŸ”„ Tri par date de crÃ©ation par dÃ©faut
- âœï¸ AccÃ¨s direct pour modification/suppression

---

## ğŸ“£ Gestion des Annonces

### ğŸ“‹ Liste des Annonces
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ“‹ Get Announcements List**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/annonces

ğŸ“– **Description**
RÃ©cupÃ¨re la liste des annonces actives avec possibilitÃ© de filtrage. Endpoint principal pour l'affichage de la page d'accueil et la recherche.

ğŸ” **Authentication**
JWT Token optionnel ğŸ”“

ğŸ“¥ **Input**
**Query Parameters:**
```
type: string (optional) - LOST|FOUND
category: string (optional) - electronics|clothing|documents|etc.
city: string (optional) - Ville de recherche
latitude: number (optional) - Latitude pour recherche gÃ©ographique
longitude: number (optional) - Longitude pour recherche gÃ©ographique
radius: number (optional) - Rayon en km (dÃ©faut: 10)
dateFrom: date (optional) - Format: yyyy-mm-dd
dateTo: date (optional) - Format: yyyy-mm-dd
page: number (optional) - Page (dÃ©faut: 0)
size: number (optional) - Taille page (dÃ©faut: 20, max: 100)
sort: string (optional) - createdAt,desc|createdAt,asc
```

**Examples:**
```http
# Toutes les annonces
GET /api/v1/annonces

# Objets perdus Ã  Paris
GET /api/v1/annonces?type=LOST&city=Paris

# Ã‰lectronique dans un rayon de 5km
GET /api/v1/annonces?category=electronics&latitude=48.8566&longitude=2.3522&radius=5

# Pagination
GET /api/v1/annonces?page=1&size=10&sort=createdAt,desc
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "content": [
            {
                "id": "123e4567-e89b-12d3-a456-426614174000",
                "title": "iPhone 14 perdu",
                "description": "iPhone 14 Pro bleu perdu prÃ¨s de la gare",
                "type": "LOST",
                "category": "electronics",
                "status": "ACTIVE",
                "location": {
                    "latitude": 48.8566,
                    "longitude": 2.3522,
                    "address": "Gare du Nord",
                    "city": "Paris"
                },
                "photos": ["/files/photo1.jpg"],
                "userFirstName": "Jean",
                "distance": 2.3,
                "createdAt": "2025-07-09T10:30:00Z"
            }
        ],
        "page": {
            "number": 0,
            "size": 20,
            "totalElements": 1,
            "totalPages": 1
        }
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ“ Si latitude/longitude fournis, inclut la distance calculÃ©e
- ğŸ” Filtres combinables pour recherche prÃ©cise
- ğŸ“„ Pagination automatique pour performance
- ğŸ¯ OptimisÃ© pour l'affichage mobile et web

---

### â• CrÃ©er une Annonce
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**â• Create New Announcement**

ğŸ”— **Endpoint**
- Method: POST ğŸŸ¡
- URL: http://localhost:8080/api/v1/annonces

ğŸ“– **Description**
Permet Ã  un utilisateur authentifiÃ© de crÃ©er une nouvelle annonce d'objet perdu ou trouvÃ© avec photos et gÃ©olocalisation.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Body Parameters:**
```json
{
    "title": "string (required, 5-200 chars)",
    "description": "string (required, 10-2000 chars)",
    "type": "string (required, LOST|FOUND)",
    "category": "string (required)",
    "location": {
        "latitude": "number (required, -90 to 90)",
        "longitude": "number (required, -180 to 180)",
        "address": "string (optional)",
        "city": "string (required)"
    },
    "contactInfo": {
        "phone": "string (optional)",
        "email": "string (optional)"
    },
    "photos": ["string (array of file IDs, max 5)"]
}
```

**Example:**
```json
POST /api/v1/annonces
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Content-Type: application/json

{
    "title": "Portefeuille trouvÃ©",
    "description": "Portefeuille en cuir noir trouvÃ© dans le parc des Buttes-Chaumont",
    "type": "FOUND",
    "category": "documents",
    "location": {
        "latitude": 48.8799,
        "longitude": 2.3832,
        "address": "Parc des Buttes-Chaumont",
        "city": "Paris"
    },
    "contactInfo": {
        "phone": "+33123456789"
    },
    "photos": ["file-id-1", "file-id-2"]
}
```

âœ… **Validation Rules**
- ğŸ”’ Authentification JWT requise
- ğŸ“ Titre et description requis (longueurs respectÃ©es)
- ğŸ“ CoordonnÃ©es GPS valides requises
- ğŸ™ï¸ Ville requise
- ğŸ“· Maximum 5 photos par annonce
- ğŸ“± TÃ©lÃ©phone optionnel (format franÃ§ais si fourni)

ğŸ“¤ **Response**

âœ… **Success (201)**
```json
{
    "success": true,
    "data": {
        "id": "550e8400-e29b-41d4-a716-446655440002",
        "title": "Portefeuille trouvÃ©",
        "type": "FOUND",
        "status": "ACTIVE",
        "location": {
            "city": "Paris"
        },
        "createdAt": "2025-07-09T14:25:00Z"
    },
    "message": "Annonce crÃ©Ã©e avec succÃ¨s",
    "timestamp": "2025-07-09T14:25:00Z"
}
```

âŒ **Validation Error (400)**
```json
{
    "success": false,
    "error": {
        "code": "VALIDATION_ERROR",
        "message": "DonnÃ©es invalides",
        "details": {
            "title": "Le titre doit contenir entre 5 et 200 caractÃ¨res",
            "location.latitude": "Latitude invalide"
        }
    },
    "timestamp": "2025-07-09T14:25:00Z"
}
```

ğŸ“ **Notes**
- ğŸ“· Photos doivent Ãªtre uploadÃ©es avant via `/api/v1/files/upload`
- ğŸ†” L'utilisateur est automatiquement dÃ©fini comme propriÃ©taire
- âœ… Statut ACTIVE assignÃ© automatiquement
- ğŸ“§ Notifications possibles aux utilisateurs intÃ©ressÃ©s

---

### ğŸ“„ DÃ©tail d'une Annonce
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ“„ Get Announcement Details**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/annonces/{id}

ğŸ“– **Description**
RÃ©cupÃ¨re les dÃ©tails complets d'une annonce spÃ©cifique, incluant toutes les photos et informations de contact.

ğŸ” **Authentication**
JWT Token optionnel ğŸ”“

ğŸ“¥ **Input**
**Path Parameters:**
- `id` (UUID, required): Identifiant unique de l'annonce

**Example:**
```http
GET /api/v1/annonces/550e8400-e29b-41d4-a716-446655440002
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...  # Optionnel
```

âœ… **Validation Rules**
- ğŸ†” ID annonce valide (format UUID)
- ğŸ“„ Annonce doit exister
- âœ… Annonce doit Ãªtre active (ou appartenir Ã  l'utilisateur connectÃ©)

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "id": "550e8400-e29b-41d4-a716-446655440002",
        "title": "Portefeuille trouvÃ©",
        "description": "Portefeuille en cuir noir trouvÃ© dans le parc des Buttes-Chaumont. Contient des papiers d'identitÃ©.",
        "type": "FOUND",
        "category": "documents",
        "status": "ACTIVE",
        "location": {
            "latitude": 48.8799,
            "longitude": 2.3832,
            "address": "Parc des Buttes-Chaumont",
            "city": "Paris"
        },
        "photos": [
            "/files/photo1.jpg",
            "/files/photo2.jpg"
        ],
        "contactInfo": {
            "phone": "+33123456789",
            "email": "marie@example.com"
        },
        "user": {
            "id": "user-marie-id",
            "firstName": "Marie",
            "lastName": "Dupont",
            "avatar": "/files/avatar-marie.jpg"
        },
        "createdAt": "2025-07-09T14:25:00Z",
        "updatedAt": "2025-07-09T14:25:00Z"
    },
    "timestamp": "2025-07-09T15:30:00Z"
}
```

âŒ **Not Found (404)**
```json
{
    "success": false,
    "error": {
        "code": "ANNOUNCEMENT_NOT_FOUND",
        "message": "Annonce introuvable"
    },
    "timestamp": "2025-07-09T15:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ‘ï¸ IncrÃ©mente automatiquement le compteur de vues
- ğŸ“ Informations de contact visibles pour contact direct
- ğŸ‘¤ Inclut les informations publiques du propriÃ©taire
- ğŸ’¬ Bouton "Contacter" peut initier une conversation

---

### âœï¸ Modifier une Annonce
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**âœï¸ Update Announcement**

ğŸ”— **Endpoint**
- Method: PUT ğŸŸ¡
- URL: http://localhost:8080/api/v1/annonces/{id}

ğŸ“– **Description**
Met Ã  jour une annonce existante. Seul l'auteur de l'annonce peut la modifier.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Path Parameters:**
- `id` (UUID, required): Identifiant unique de l'annonce

**Body Parameters:**
```json
{
    "title": "string (optional)",
    "description": "string (optional)",
    "category": "string (optional)",
    "status": "string (optional)"
}
```

**Example:**
```json
PUT /api/v1/annonces/550e8400-e29b-41d4-a716-446655440002
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Content-Type: application/json

{
    "title": "iPhone 13 Pro trouvÃ© - RÃ‰SOLU",
    "description": "iPhone trouvÃ© prÃ¨s de la gare - PropriÃ©taire retrouvÃ© !",
    "status": "RESOLVED"
}
```

âœ… **Validation Rules**
- ğŸ“ Titre optionnel (3-100 caractÃ¨res)
- ğŸ“ Description optionnelle (10-1000 caractÃ¨res)
- ğŸ“‚ CatÃ©gorie parmi : electronics, clothing, accessories, documents, keys, other
- ğŸ”„ Statut parmi : ACTIVE, RESOLVED, EXPIRED

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "id": "550e8400-e29b-41d4-a716-446655440002",
        "title": "iPhone 13 Pro trouvÃ© - RÃ‰SOLU",
        "description": "iPhone trouvÃ© prÃ¨s de la gare - PropriÃ©taire retrouvÃ© !",
        "type": "FOUND",
        "category": "electronics",
        "status": "RESOLVED",
        "location": {
            "latitude": 48.8566,
            "longitude": 2.3522,
            "address": "Gare du Nord, Paris"
        },
        "createdAt": "2025-07-09T08:30:00Z",
        "updatedAt": "2025-07-09T11:45:00Z"
    },
    "message": "Annonce modifiÃ©e avec succÃ¨s",
    "timestamp": "2025-07-09T11:45:00Z"
}
```

âŒ **Forbidden (403)**
```json
{
    "success": false,
    "error": {
        "code": "ACCESS_DENIED",
        "message": "Vous ne pouvez modifier que vos propres annonces"
    },
    "timestamp": "2025-07-09T11:45:00Z"
}
```

ğŸ“ **Notes**
- ğŸ”’ Seul l'auteur peut modifier son annonce
- ğŸ”„ Champ `updatedAt` automatiquement mis Ã  jour
- ğŸš« Type et localisation non modifiables aprÃ¨s crÃ©ation

---

### ğŸ—‘ï¸ Supprimer une Annonce
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ—‘ï¸ Delete Announcement**

ğŸ”— **Endpoint**
- Method: DELETE ğŸ”´
- URL: http://localhost:8080/api/v1/annonces/{id}

ğŸ“– **Description**
Supprime dÃ©finitivement une annonce. Seul l'auteur ou un administrateur peut supprimer une annonce.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Path Parameters:**
- `id` (UUID, required): Identifiant unique de l'annonce

**Example:**
```
DELETE /api/v1/annonces/550e8400-e29b-41d4-a716-446655440002
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "message": "Annonce supprimÃ©e avec succÃ¨s",
    "timestamp": "2025-07-09T12:00:00Z"
}
```

âŒ **Forbidden (403)**
```json
{
    "success": false,
    "error": {
        "code": "ACCESS_DENIED",
        "message": "Vous ne pouvez supprimer que vos propres annonces"
    },
    "timestamp": "2025-07-09T12:00:00Z"
}
```

ğŸ“ **Notes**
- ğŸ”’ Seul l'auteur ou un admin peut supprimer
- âš ï¸ Suppression dÃ©finitive, non rÃ©versible
- ğŸ—‚ï¸ Messages liÃ©s Ã©galement supprimÃ©s

---

### ğŸ” Recherche d'Annonces
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ” Search Announcements**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/annonces/search

ğŸ“– **Description**
Recherche avancÃ©e d'annonces avec filtres multiples : mots-clÃ©s, localisation, catÃ©gorie, date.

ğŸ” **Authentication**
JWT Token optionnel ğŸ”“

ğŸ“¥ **Input**
**Query Parameters:**
- `q` (string, optional): Mots-clÃ©s de recherche
- `type` (string, optional): LOST ou FOUND
- `category` (string, optional): CatÃ©gorie d'objet
- `latitude` (number, optional): Latitude pour recherche gÃ©ographique
- `longitude` (number, optional): Longitude pour recherche gÃ©ographique
- `radius` (number, optional): Rayon en km (dÃ©faut: 10km)
- `dateFrom` (string, optional): Date minimum (ISO 8601)
- `dateTo` (string, optional): Date maximum (ISO 8601)
- `page` (number, optional): NumÃ©ro de page (dÃ©faut: 0)
- `size` (number, optional): Taille de page (dÃ©faut: 20, max: 100)

**Example:**
```
GET /api/v1/annonces/search?q=iPhone&type=FOUND&category=electronics&latitude=48.8566&longitude=2.3522&radius=5&page=0&size=10
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...  # Optionnel
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "content": [
            {
                "id": "550e8400-e29b-41d4-a716-446655440002",
                "title": "iPhone 13 Pro trouvÃ©",
                "description": "iPhone trouvÃ© prÃ¨s de la gare",
                "type": "FOUND",
                "category": "electronics",
                "status": "ACTIVE",
                "location": {
                    "latitude": 48.8566,
                    "longitude": 2.3522,
                    "address": "Gare du Nord, Paris",
                    "distance": 2.3
                },
                "createdAt": "2025-07-09T08:30:00Z",
                "user": {
                    "firstName": "Marie",
                    "lastName": "D."
                },
                "thumbnailUrl": "/files/thumb_img_001.jpg"
            }
        ],
        "page": {
            "number": 0,
            "size": 10,
            "totalElements": 1,
            "totalPages": 1
        }
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ” Recherche textuelle sur titre et description
- ğŸ“ Distance calculÃ©e si gÃ©olocalisation fournie
- ğŸ·ï¸ Tri par pertinence puis date
- ğŸ“„ Pagination standard

---

### ğŸ‘¤ Annonces d'un Utilisateur
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ‘¤ Get User's Announcements**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/users/{userId}/annonces

ğŸ“– **Description**
RÃ©cupÃ¨re toutes les annonces d'un utilisateur spÃ©cifique.

ğŸ” **Authentication**
JWT Token optionnel ğŸ”“

ğŸ“¥ **Input**
**Path Parameters:**
- `userId` (UUID, required): Identifiant de l'utilisateur

**Query Parameters:**
- `type` (string, optional): LOST ou FOUND
- `status` (string, optional): ACTIVE, RESOLVED, EXPIRED
- `page` (number, optional): NumÃ©ro de page (dÃ©faut: 0)
- `size` (number, optional): Taille de page (dÃ©faut: 20)

**Example:**
```
GET /api/v1/users/550e8400-e29b-41d4-a716-446655440001/annonces?type=FOUND&status=ACTIVE
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...  # Optionnel
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "content": [
            {
                "id": "550e8400-e29b-41d4-a716-446655440002",
                "title": "iPhone 13 Pro trouvÃ©",
                "type": "FOUND",
                "category": "electronics",
                "status": "ACTIVE",
                "createdAt": "2025-07-09T08:30:00Z",
                "thumbnailUrl": "/files/thumb_img_001.jpg"
            }
        ],
        "page": {
            "number": 0,
            "size": 20,
            "totalElements": 1,
            "totalPages": 1
        }
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ‘ï¸ Visible pour tous les utilisateurs
- ğŸ·ï¸ Tri par date de crÃ©ation dÃ©croissante
- ğŸ“± Format optimisÃ© pour liste mobile

---

## ğŸ’¬ Messagerie

### ğŸ’¬ Liste des Conversations
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ’¬ Get User Conversations**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/conversations

ğŸ“– **Description**
RÃ©cupÃ¨re la liste des conversations de l'utilisateur connectÃ© avec informations du dernier message et statut de lecture.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Query Parameters:**
```
page: number (optional) - Page (dÃ©faut: 0)
size: number (optional) - Taille page (dÃ©faut: 20)
```

**Example:**
```http
GET /api/v1/conversations
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
```

âœ… **Validation Rules**
- ğŸ”’ Authentification JWT requise
- ğŸ‘¤ Utilisateur actif requis

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "content": [
            {
                "id": "conv-uuid-123",
                "annonce": {
                    "id": "annonce-uuid-456",
                    "title": "iPhone 14 perdu",
                    "type": "LOST"
                },
                "otherParticipant": {
                    "id": "user-uuid-789",
                    "firstName": "Jean",
                    "lastName": "Martin",
                    "avatar": "/files/avatar-jean.jpg"
                },
                "lastMessage": {
                    "content": "Bonjour, j'ai peut-Ãªtre trouvÃ© votre tÃ©lÃ©phone",
                    "sentAt": "2025-07-09T16:45:00Z",
                    "senderId": "user-uuid-789"
                },
                "unreadCount": 2,
                "updatedAt": "2025-07-09T16:45:00Z"
            }
        ],
        "page": {
            "number": 0,
            "size": 20,
            "totalElements": 1,
            "totalPages": 1
        }
    },
    "timestamp": "2025-07-09T17:00:00Z"
}
```

ğŸ“ **Notes**
- ğŸ“¬ TriÃ©es par derniÃ¨re activitÃ© (plus rÃ©cente en premier)
- ğŸ”´ unreadCount indique les messages non lus
- ğŸ‘¥ otherParticipant = l'autre personne dans la conversation
- ğŸ“„ Inclut les infos de l'annonce liÃ©e pour contexte

---

### ğŸ’¬ CrÃ©er une Conversation
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ’¬ Start Conversation**

ğŸ”— **Endpoint**
- Method: POST ğŸŸ¡
- URL: http://localhost:8080/api/v1/conversations

ğŸ“– **Description**
DÃ©marre une nouvelle conversation autour d'une annonce avec un autre utilisateur.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Body Parameters:**
```json
{
    "annonceId": "string (required, UUID)",
    "recipientId": "string (required, UUID)",
    "initialMessage": "string (required)"
}
```

**Example:**
```json
POST /api/v1/conversations
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Content-Type: application/json

{
    "annonceId": "550e8400-e29b-41d4-a716-446655440002",
    "recipientId": "550e8400-e29b-41d4-a716-446655440001",
    "initialMessage": "Bonjour, j'ai peut-Ãªtre trouvÃ© votre tÃ©lÃ©phone. Pouvez-vous me dÃ©crire sa coque ?"
}
```

âœ… **Validation Rules**
- ğŸ“„ Annonce doit exister et Ãªtre active
- ğŸ‘¤ Destinataire doit exister et Ãªtre actif
- ğŸ’¬ Message initial requis (5-500 caractÃ¨res)
- ğŸš« Ne peut pas se contacter soi-mÃªme

ğŸ“¤ **Response**

âœ… **Success (201)**
```json
{
    "success": true,
    "data": {
        "id": "conv-uuid-new-123",
        "annonceId": "550e8400-e29b-41d4-a716-446655440002",
        "participants": [
            {
                "id": "current-user-id",
                "firstName": "Jean",
                "lastName": "Martin"
            },
            {
                "id": "550e8400-e29b-41d4-a716-446655440001",
                "firstName": "Marie",
                "lastName": "Dupont"
            }
        ],
        "createdAt": "2025-07-09T18:00:00Z"
    },
    "message": "Conversation crÃ©Ã©e avec succÃ¨s",
    "timestamp": "2025-07-09T18:00:00Z"
}
```

âŒ **Conflict (409)**
```json
{
    "success": false,
    "error": {
        "code": "CONVERSATION_EXISTS",
        "message": "Une conversation existe dÃ©jÃ  pour cette annonce entre ces utilisateurs"
    },
    "timestamp": "2025-07-09T18:00:00Z"
}
```

ğŸ“ **Notes**
- ğŸ”„ Si conversation existe dÃ©jÃ , retourne l'ID existant
- ğŸ“„ LiÃ©e Ã  une annonce spÃ©cifique
- ğŸ’¬ Message initial automatiquement envoyÃ©

---

### ğŸ’¬ Messages d'une Conversation
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ’¬ Get Conversation Messages**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/conversations/{conversationId}/messages

ğŸ“– **Description**
RÃ©cupÃ¨re l'historique des messages d'une conversation spÃ©cifique.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Path Parameters:**
- `conversationId` (UUID, required): Identifiant de la conversation

**Query Parameters:**
- `page` (number, optional): NumÃ©ro de page (dÃ©faut: 0)
- `size` (number, optional): Taille de page (dÃ©faut: 50)

**Example:**
```
GET /api/v1/conversations/conv-uuid-123/messages?page=0&size=50
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "content": [
            {
                "id": "msg-uuid-001",
                "content": "Bonjour, j'ai peut-Ãªtre trouvÃ© votre tÃ©lÃ©phone",
                "senderId": "user-uuid-789",
                "senderName": "Jean Martin",
                "sentAt": "2025-07-09T16:45:00Z",
                "isRead": true
            },
            {
                "id": "msg-uuid-002", 
                "content": "Merci ! Pouvez-vous me dire de quelle couleur est la coque ?",
                "senderId": "current-user-id",
                "senderName": "Marie Dupont",
                "sentAt": "2025-07-09T16:47:00Z",
                "isRead": false
            }
        ],
        "page": {
            "number": 0,
            "size": 50,
            "totalElements": 2,
            "totalPages": 1
        }
    },
    "timestamp": "2025-07-09T18:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ“… Messages triÃ©s du plus rÃ©cent au plus ancien
- ğŸ‘ï¸ Marque automatiquement les messages comme lus
- ğŸ”’ Seuls les participants peuvent voir les messages

---

### ğŸ’¬ Envoyer un Message
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ’¬ Send Message**

ğŸ”— **Endpoint**
- Method: POST ğŸŸ¡
- URL: http://localhost:8080/api/v1/conversations/{conversationId}/messages

ğŸ“– **Description**
Envoie un nouveau message dans une conversation existante.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Path Parameters:**
- `conversationId` (UUID, required): Identifiant de la conversation

**Body Parameters:**
```json
{
    "content": "string (required)"
}
```

**Example:**
```json
POST /api/v1/conversations/conv-uuid-123/messages
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Content-Type: application/json

{
    "content": "Parfait ! Rendez-vous demain Ã  14h devant la gare. Merci beaucoup !"
}
```

âœ… **Validation Rules**
- ğŸ’¬ Contenu requis (1-1000 caractÃ¨res)
- ğŸ”’ Utilisateur doit Ãªtre participant de la conversation
- âœ… Conversation doit Ãªtre active

ğŸ“¤ **Response**

âœ… **Success (201)**
```json
{
    "success": true,
    "data": {
        "id": "msg-uuid-003",
        "content": "Parfait ! Rendez-vous demain Ã  14h devant la gare. Merci beaucoup !",
        "senderId": "current-user-id",
        "senderName": "Marie Dupont",
        "sentAt": "2025-07-09T18:45:00Z",
        "isRead": false
    },
    "message": "Message envoyÃ© avec succÃ¨s",
    "timestamp": "2025-07-09T18:45:00Z"
}
```

âŒ **Forbidden (403)**
```json
{
    "success": false,
    "error": {
        "code": "ACCESS_DENIED",
        "message": "Vous n'Ãªtes pas participant de cette conversation"
    },
    "timestamp": "2025-07-09T18:45:00Z"
}
```

ğŸ“ **Notes**
- ğŸ”„ Notifications push automatiques vers l'autre participant
- ğŸ“± Message apparaÃ®t instantanÃ©ment dans la conversation
- ğŸ• Horodatage prÃ©cis pour synchronisation

---

### ğŸ’¬ Marquer comme Lu
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ’¬ Mark Messages as Read**

ğŸ”— **Endpoint**
- Method: PUT ğŸŸ¡
- URL: http://localhost:8080/api/v1/conversations/{conversationId}/read

ğŸ“– **Description**
Marque tous les messages non lus d'une conversation comme lus.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Path Parameters:**
- `conversationId` (UUID, required): Identifiant de la conversation

**Example:**
```
PUT /api/v1/conversations/conv-uuid-123/read
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "markedAsRead": 3,
        "conversationId": "conv-uuid-123"
    },
    "message": "Messages marquÃ©s comme lus",
    "timestamp": "2025-07-09T19:00:00Z"
}
```

ğŸ“ **Notes**
- ğŸ”´ Met Ã  jour le compteur `unreadCount` dans la liste des conversations
- ğŸ“± Optimisation pour Ã©viter de marquer message par message
- ğŸ‘ï¸ Action automatique Ã  l'ouverture d'une conversation

---

## ğŸ“ Gestion des Fichiers

### ğŸ“¤ Upload de Fichier
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ“¤ Upload File**

ğŸ”— **Endpoint**
- Method: POST ğŸŸ¡
- URL: http://localhost:8080/api/v1/files/upload

ğŸ“– **Description**
Permet l'upload d'un fichier (photo) avec compression automatique et gÃ©nÃ©ration de miniatures.

ğŸ” **Authentication**
JWT Token required ğŸ”‘

ğŸ“¥ **Input**
**Form Data:**
```
file: File (required) - Image file (JPG, PNG, WEBP)
```

**Example:**
```http
POST /api/v1/files/upload
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Content-Type: multipart/form-data

file: [binary data]
```

âœ… **Validation Rules**
- ğŸ”’ Authentification JWT requise
- ğŸ“· Types autorisÃ©s: JPG, PNG, WEBP
- ğŸ“ Taille maximum: 10MB
- ğŸ–¼ï¸ RÃ©solution maximum: 4000x4000px

ğŸ“¤ **Response**

âœ… **Success (201)**
```json
{
    "success": true,
    "data": {
        "id": "file-uuid-123",
        "originalName": "photo.jpg",
        "url": "/files/file-uuid-123",
        "thumbnailUrl": "/files/file-uuid-123/thumbnail",
        "size": 2048576,
        "mimeType": "image/jpeg",
        "width": 1920,
        "height": 1080
    },
    "message": "Fichier uploadÃ© avec succÃ¨s",
    "timestamp": "2025-07-09T17:30:00Z"
}
```

âŒ **File Too Large (413)**
```json
{
    "success": false,
    "error": {
        "code": "FILE_TOO_LARGE",
        "message": "Le fichier dÃ©passe la taille maximum autorisÃ©e (10MB)"
    },
    "timestamp": "2025-07-09T17:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ—œï¸ Compression automatique pour optimiser le stockage
- ğŸ–¼ï¸ GÃ©nÃ©ration automatique de miniatures
- â° Fichiers temporaires supprimÃ©s aprÃ¨s 24h si non utilisÃ©s
- ğŸ”— ID retournÃ© Ã  utiliser dans les annonces

---

### ğŸ“¥ AccÃ©der Ã  un Fichier
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ“¥ Get File**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/files/{fileId}

ğŸ“– **Description**
AccÃ¨de Ã  un fichier uploadÃ© (photo) via son identifiant unique.

ğŸ” **Authentication**
Aucune authentification requise âŒ

ğŸ“¥ **Input**
**Path Parameters:**
- `fileId` (string, required): Identifiant unique du fichier

**Query Parameters:**
- `thumbnail` (boolean, optional): Retourner la miniature (dÃ©faut: false)

**Example:**
```
GET /api/v1/files/file-uuid-123
GET /api/v1/files/file-uuid-123?thumbnail=true
```

âœ… **Validation Rules**
- ğŸ†” ID fichier valide requis
- ğŸ“„ Fichier doit exister et Ãªtre accessible
- ğŸ”“ Pas d'authentification requise pour l'accÃ¨s public

ğŸ“¤ **Response**

âœ… **Success (200)**
```
Content-Type: image/jpeg
Content-Length: 2048576

[binary image data]
```

âŒ **Not Found (404)**
```json
{
    "success": false,
    "error": {
        "code": "FILE_NOT_FOUND",
        "message": "Fichier introuvable"
    },
    "timestamp": "2025-07-09T17:45:00Z"
}
```

ğŸ“ **Notes**
- ğŸ–¼ï¸ Retourne directement les donnÃ©es binaires de l'image
- ğŸ“ En-tÃªtes HTTP appropriÃ©s (Content-Type, Content-Length)
- ğŸ”“ AccÃ¨s public pour affichage dans l'app
- ğŸ–¼ï¸ ParamÃ¨tre thumbnail pour les miniatures optimisÃ©es

---

## ğŸ“Š Administration

### ğŸ“Š Statistiques Globales
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ“Š Get Global Statistics**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/admin/stats

ğŸ“– **Description**
RÃ©cupÃ¨re les statistiques globales de la plateforme pour le tableau de bord administrateur.

ğŸ” **Authentication**
JWT Token required ğŸ”‘ (Role: ADMIN)

ğŸ“¥ **Input**
**Query Parameters:**
Aucun paramÃ¨tre requis âŒ

**Example:**
```http
GET /api/v1/admin/stats
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
```

âœ… **Validation Rules**
- ğŸ”’ Authentification JWT requise
- ğŸ‘‘ RÃ´le ADMIN requis

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "users": {
            "total": 1250,
            "active": 1100,
            "newThisMonth": 85
        },
        "announcements": {
            "total": 2340,
            "active": 456,
            "lost": 234,
            "found": 222,
            "resolvedThisMonth": 89
        },
        "conversations": {
            "total": 890,
            "activeToday": 45
        },
        "files": {
            "totalSize": "2.5GB",
            "totalCount": 3456
        }
    },
    "timestamp": "2025-07-09T18:00:00Z"
}
```

âŒ **Forbidden (403)**
```json
{
    "success": false,
    "error": {
        "code": "INSUFFICIENT_PRIVILEGES",
        "message": "AccÃ¨s rÃ©servÃ© aux administrateurs"
    },
    "timestamp": "2025-07-09T18:00:00Z"
}
```

ğŸ“ **Notes**
- ğŸ‘‘ AccÃ¨s restreint aux utilisateurs avec rÃ´le ADMIN
- ğŸ“ˆ Statistiques mises Ã  jour en temps rÃ©el
- ğŸ“Š Parfait pour tableaux de bord et rapports
- ğŸ”„ DonnÃ©es cachÃ©es pour performance

---

### ğŸ‘¥ Gestion des Utilisateurs (Admin)
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ‘¥ Admin - List Users**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/admin/users

ğŸ“– **Description**
Liste tous les utilisateurs avec options de recherche et filtrage pour les administrateurs.

ğŸ” **Authentication**
JWT Token required (ADMIN role) ğŸ‘‘

ğŸ“¥ **Input**
**Query Parameters:**
- `search` (string, optional): Recherche par nom, email
- `status` (string, optional): ACTIVE, BLOCKED, DELETED
- `page` (number, optional): NumÃ©ro de page (dÃ©faut: 0)
- `size` (number, optional): Taille de page (dÃ©faut: 20)
- `sort` (string, optional): Tri (createdAt, lastName, email)

**Example:**
```
GET /api/v1/admin/users?search=marie&status=ACTIVE&page=0&size=10&sort=createdAt,desc
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "content": [
            {
                "id": "550e8400-e29b-41d4-a716-446655440001",
                "email": "marie.dupont@example.com",
                "firstName": "Marie",
                "lastName": "Dupont",
                "phone": "+33123456789",
                "status": "ACTIVE",
                "role": "USER",
                "createdAt": "2025-07-01T10:30:00Z",
                "lastLoginAt": "2025-07-09T08:00:00Z",
                "announcementCount": 3,
                "conversationCount": 5
            }
        ],
        "page": {
            "number": 0,
            "size": 10,
            "totalElements": 1,
            "totalPages": 1
        }
    },
    "timestamp": "2025-07-09T19:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ‘‘ RÃ©servÃ© aux administrateurs uniquement
- ğŸ” Recherche sur nom complet et email
- ğŸ“Š Inclut statistiques d'activitÃ© par utilisateur

---

### ğŸš« Bloquer un Utilisateur (Admin)
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸš« Admin - Block User**

ğŸ”— **Endpoint**
- Method: PUT ğŸŸ¡
- URL: http://localhost:8080/api/v1/admin/users/{userId}/block

ğŸ“– **Description**
Bloque un utilisateur, l'empÃªchant de se connecter et masquant ses annonces.

ğŸ” **Authentication**
JWT Token required (ADMIN role) ğŸ‘‘

ğŸ“¥ **Input**
**Path Parameters:**
- `userId` (UUID, required): Identifiant de l'utilisateur

**Body Parameters:**
```json
{
    "reason": "string (required)",
    "duration": "number (optional, days)"
}
```

**Example:**
```json
PUT /api/v1/admin/users/550e8400-e29b-41d4-a716-446655440001/block
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Content-Type: application/json

{
    "reason": "Contenu inappropriÃ© rÃ©pÃ©tÃ©",
    "duration": 30
}
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "userId": "550e8400-e29b-41d4-a716-446655440001",
        "status": "BLOCKED",
        "blockedAt": "2025-07-09T20:00:00Z",
        "blockReason": "Contenu inappropriÃ© rÃ©pÃ©tÃ©",
        "unblockAt": "2025-08-08T20:00:00Z"
    },
    "message": "Utilisateur bloquÃ© avec succÃ¨s",
    "timestamp": "2025-07-09T20:00:00Z"
}
```

ğŸ“ **Notes**
- ğŸš« Utilisateur ne peut plus se connecter
- ğŸ“„ Ses annonces deviennent invisibles
- ğŸ”“ DÃ©blocage automatique si durÃ©e spÃ©cifiÃ©e

---

### ğŸ—‘ï¸ Supprimer un Utilisateur (Admin)
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ—‘ï¸ Admin - Delete User**

ğŸ”— **Endpoint**
- Method: DELETE ğŸ”´
- URL: http://localhost:8080/api/v1/admin/users/{userId}

ğŸ“– **Description**
Supprime dÃ©finitivement un compte utilisateur et toutes ses donnÃ©es (RGPD).

ğŸ” **Authentication**
JWT Token required (ADMIN role) ğŸ‘‘

ğŸ“¥ **Input**
**Path Parameters:**
- `userId` (UUID, required): Identifiant de l'utilisateur

**Example:**
```
DELETE /api/v1/admin/users/550e8400-e29b-41d4-a716-446655440001
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "message": "Compte utilisateur supprimÃ© dÃ©finitivement",
    "timestamp": "2025-07-09T20:15:00Z"
}
```

ğŸ“ **Notes**
- âš ï¸ Suppression dÃ©finitive et irrÃ©versible
- ğŸ—‚ï¸ Toutes donnÃ©es liÃ©es supprimÃ©es (annonces, messages, fichiers)
- ğŸ“ Action tracÃ©e dans les logs admin

---

### ğŸ“‹ ModÃ©ration des Annonces (Admin)
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸ“‹ Admin - List All Announcements**

ğŸ”— **Endpoint**
- Method: GET ğŸŸ¢
- URL: http://localhost:8080/api/v1/admin/announcements

ğŸ“– **Description**
Liste toutes les annonces avec outils de modÃ©ration pour les administrateurs.

ğŸ” **Authentication**
JWT Token required (ADMIN role) ğŸ‘‘

ğŸ“¥ **Input**
**Query Parameters:**
- `status` (string, optional): ACTIVE, RESOLVED, EXPIRED, BLOCKED
- `type` (string, optional): LOST, FOUND
- `userId` (string, optional): Filtrer par auteur
- `reported` (boolean, optional): Annonces signalÃ©es uniquement
- `page` (number, optional): NumÃ©ro de page (dÃ©faut: 0)
- `size` (number, optional): Taille de page (dÃ©faut: 20)

**Example:**
```
GET /api/v1/admin/announcements?status=ACTIVE&reported=true&page=0&size=10
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "content": [
            {
                "id": "550e8400-e29b-41d4-a716-446655440002",
                "title": "iPhone 13 Pro trouvÃ©",
                "type": "FOUND",
                "status": "ACTIVE",
                "createdAt": "2025-07-09T08:30:00Z",
                "author": {
                    "id": "550e8400-e29b-41d4-a716-446655440001",
                    "email": "marie.dupont@example.com",
                    "firstName": "Marie",
                    "lastName": "Dupont"
                },
                "reportCount": 2,
                "lastReportAt": "2025-07-09T19:00:00Z",
                "moderationNotes": ""
            }
        ],
        "page": {
            "number": 0,
            "size": 10,
            "totalElements": 1,
            "totalPages": 1
        }
    },
    "timestamp": "2025-07-09T20:30:00Z"
}
```

ğŸ“ **Notes**
- ğŸ‘‘ Vue administrative complÃ¨te
- ğŸš¨ Indicateur de signalements
- âœï¸ Notes de modÃ©ration incluses

---

### ğŸš« Bloquer une Annonce (Admin)
**DerniÃ¨re modification par [Votre nom] Il y a X jours**

**ğŸš« Admin - Block Announcement**

ğŸ”— **Endpoint**
- Method: PUT ğŸŸ¡
- URL: http://localhost:8080/api/v1/admin/announcements/{announcementId}/block

ğŸ“– **Description**
Bloque une annonce inappropriÃ©e, la rendant invisible publiquement.

ğŸ” **Authentication**
JWT Token required (ADMIN role) ğŸ‘‘

ğŸ“¥ **Input**
**Path Parameters:**
- `announcementId` (UUID, required): Identifiant de l'annonce

**Body Parameters:**
```json
{
    "reason": "string (required)",
    "moderationNotes": "string (optional)"
}
```

**Example:**
```json
PUT /api/v1/admin/announcements/550e8400-e29b-41d4-a716-446655440002/block
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Content-Type: application/json

{
    "reason": "Contenu inappropriÃ©",
    "moderationNotes": "Photos non conformes Ã  l'objet dÃ©crit"
}
```

ğŸ“¤ **Response**

âœ… **Success (200)**
```json
{
    "success": true,
    "data": {
        "announcementId": "550e8400-e29b-41d4-a716-446655440002",
        "status": "BLOCKED",
        "blockedAt": "2025-07-09T20:45:00Z",
        "blockReason": "Contenu inappropriÃ©",
        "moderationNotes": "Photos non conformes Ã  l'objet dÃ©crit"
    },
    "message": "Annonce bloquÃ©e avec succÃ¨s",
    "timestamp": "2025-07-09T20:45:00Z"
}
```

ğŸ“ **Notes**
- ğŸš« Annonce devient invisible dans les recherches
- ğŸ“§ Notification automatique Ã  l'auteur
- ğŸ“ Historique de modÃ©ration conservÃ©

---

## ğŸš€ Codes de Statut HTTP

| Code | Signification | Usage |
|------|---------------|-------|
| 200 | âœ… OK | RequÃªte rÃ©ussie |
| 201 | âœ… Created | Ressource crÃ©Ã©e |
| 400 | âŒ Bad Request | DonnÃ©es invalides |
| 401 | âŒ Unauthorized | Non authentifiÃ© |
| 403 | âŒ Forbidden | AccÃ¨s interdit |
| 404 | âŒ Not Found | Ressource introuvable |
| 409 | âŒ Conflict | Conflit (ex: email dÃ©jÃ  utilisÃ©) |
| 413 | âŒ Payload Too Large | Fichier trop volumineux |
| 500 | ğŸ”´ Internal Server Error | Erreur serveur |

## ğŸ”§ Format de RÃ©ponse Standard

Toutes les rÃ©ponses suivent ce format JSON standardisÃ© :

### âœ… SuccÃ¨s
```json
{
    "success": true,
    "data": { ... },
    "message": "string (optional)",
    "timestamp": "2025-07-09T10:30:00Z"
}
```

### âŒ Erreur
```json
{
    "success": false,
    "error": {
        "code": "ERROR_CODE",
        "message": "Description de l'erreur",
        "details": { ... }
    },
    "timestamp": "2025-07-09T10:30:00Z"
}
```
